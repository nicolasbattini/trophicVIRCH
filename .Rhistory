group_by(Depredador_nodo, Presa_checklist) %>%
summarise()
interacciones
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, na.omit(Presa_checklist)) %>%
summarise()
interacciones
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise()%>%
na.omit()
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise()%>%
na.omit()
interacciones
View(interacciones)
na.omit(interacciones)
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise()
interacciones
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise(na.omit())
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise(na.omit(Presa_checklist))
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise()
interacciones <- na.omit(interacciones_db) %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise()
interacciones
View(interacciones)
library(dplyr)
directorio <- "C:/Users/ASUS/Documents/GitHub/trophicVIRCH/"
checklist <- read.csv(paste(directorio, "data/checklist.csv", sep = "/"))
interacciones_db <- read.csv(paste(directorio, "data/interacciones.csv", sep = "/"))
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise()
interacciones
interacciones <- interacciones_db %>%
na.omit() %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise()
interacciones
interacciones_db <- read.csv(paste(directorio, "data/interacciones.csv", sep = "/"))
interacciones_db
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
na.omit()
interacciones
interacciones[1,2]
is.na(interacciones[1,2])
is.null(interacciones[1,2])
class(interacciones[1,2])
interacciones_db <- read.csv(paste(directorio, "data/interacciones.csv", sep = "/"), comment.char = NA)
interacciones_db <- read.csv(paste(directorio, "data/interacciones.csv", sep = "/"), quote = "")
interacciones_db
View(interacciones_db)
interacciones_db <- read.csv(paste(directorio, "data/interacciones.csv", sep = "/"))
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
na.omit()
View(interacciones)
which(interacciones[,2]=="")
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
mutate(Presa_checklist==""~NA) %>%
na.omit()
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
mutate(which(Presa_checklist=="") <- NA) %>%
na.omit()
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
mutate(which(Presa_checklist=="") == NA) %>%
na.omit()
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="")
interacciones
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
mutate(depredador=Depredador_nodo,
presa=Presa_checklist)
interacciones
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(depredador=Depredador_nodo,
presa=Presa_checklist)
interacciones
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE)
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE)
library(tidyverse)
library(tidyverse)
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE)
interacciones
unique(interacciones)
require(igraph)
library(multiweb)
require(multiweb)c("tidyverse", "ggplot2", "igraph", "multiweb", "NetIndices")
require(multiweb)
remotes::install_github("lsaravia/multiweb")
# remotes::install_github("lsaravia/multiweb")
library(multiweb)
library(NetIndices)
g <- graph_from_edgelist(as.matrix(interacciones[,1:2]), directed = TRUE)
plotTrophLevel(g, ylab = "Trophic level")
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = TRUE)
g <- graph_from_edgelist(as.matrix(interacciones[,2:1]), directed = TRUE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = TRUE)
library(tidyverse)
library(ggplot2)
library(igraph)
# remotes::install_github("lsaravia/multiweb")
library(multiweb)
library(NetIndices)
directorio <- "C:/Users/ASUS/Documents/GitHub/trophicVIRCH/"
checklist <- read.csv(paste(directorio, "data/checklist.csv", sep = "/"))
interacciones_db <- read.csv(paste(directorio, "data/interacciones.csv", sep = "/"))
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE)
g <- graph_from_edgelist(as.matrix(interacciones[,2:1]), directed = TRUE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = TRUE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = FALSE)
setdiff(interacciones$predator, interacciones$prey)
interacciones_db <- read.csv(paste(directorio, "data/interacciones.csv", sep = "/"))
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE)
g <- graph_from_edgelist(as.matrix(interacciones[,2:1]), directed = TRUE)
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE)
g <- graph_from_edgelist(as.matrix(interacciones[,2:1]), directed = TRUE)
interacciones_db <- read.csv(paste(directorio, "data/interacciones.csv", sep = "/"))
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE)
g <- graph_from_edgelist(as.matrix(interacciones[,2:1]), directed = TRUE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = FALSE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = TRUE)
interacciones_db <- read.csv(paste(directorio, "data/interacciones.csv", sep = "/"))
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE)
g <- graph_from_edgelist(as.matrix(interacciones[,2:1]), directed = TRUE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = TRUE)
View(g)
interacciones_db <- read.csv(paste(directorio, "data/interacciones.csv", sep = "/"))
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE)
g <- graph_from_edgelist(as.matrix(interacciones[,2:1]), directed = TRUE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = TRUE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = FALSE)
setdiff(interacciones$predator, interacciones$prey)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = TRUE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = FALSE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = FALSE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = FALSE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = TRUE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = FALSE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = FALSE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = FALSE,
tk=TRUE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = true)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = TRUE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = TRUE,
tk=TRUE)
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE) %>%
# collapse Insecta
mutate(Presa_checklist = case_when(Presa_checklist %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Presa_checklist %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
Presa_checklist %in% c("Oligochaeta") ~ "Clitellata",
Presa_checklist %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Presa_checklist %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
Presa_checklist %in% c("Oligochaeta") ~ "Clitellata"))
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE) %>%
# collapse Insecta
mutate(prey = case_when(prey %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
prey %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
prey %in% c("Oligochaeta") ~ "Clitellata",
prey %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
prey %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
prey %in% c("Oligochaeta") ~ "Clitellata"))
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE) %>%
# collapse groups
mutate(prey = case_when(prey %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
predator %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
prey %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
predator %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
prey %in% c("Oligochaeta") ~ "Clitellata",
predator %in% c("Oligochaeta") ~ "Clitellata"))
g <- graph_from_edgelist(as.matrix(interacciones[,2:1]), directed = TRUE)
interacciones <- interacciones_db %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
mutate(prey = case_when(Presa_checklist %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Depredador_nodo %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Presa_checklist %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
Depredador_nodo %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
Presa_checklist %in% c("Oligochaeta") ~ "Clitellata",
Depredador_nodo %in% c("Oligochaeta") ~ "Clitellata"))  %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE)
interacciones <- interacciones_db %>%
mutate(prey = case_when(Presa_checklist %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Depredador_nodo %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Presa_checklist %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
Depredador_nodo %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
Presa_checklist %in% c("Oligochaeta") ~ "Clitellata",
Depredador_nodo %in% c("Oligochaeta") ~ "Clitellata"))  %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE)
interacciones_db <- read.csv(paste(directorio, "data/interacciones.csv", sep = "/"))
interacciones <- interacciones_db %>%
mutate(Presa_checklist = case_when(Presa_checklist %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Presa_checklist %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
Presa_checklist %in% c("Oligochaeta") ~ "Clitellata",, TRUE ~ Presa_checklist)) %>%
mutate(Depredador_nodo= case_when(Depredador_nodo %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Depredador_nodo %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
Depredador_nodo %in% c("Oligochaeta") ~ "Clitellata", TRUE ~ Depredador_nodo))  %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE)
interacciones <- interacciones_db %>%
mutate(Presa_checklist = case_when(Presa_checklist %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Presa_checklist %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
Presa_checklist %in% c("Oligochaeta") ~ "Clitellata",, TRUE ~ Presa_checklist)) %>%
mutate(Depredador_nodo= case_when(Depredador_nodo %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Depredador_nodo %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
Depredador_nodo %in% c("Oligochaeta") ~ "Clitellata", TRUE ~ Depredador_nodo))
interacciones <- interacciones_db %>%
mutate(Presa_checklist = case_when(Presa_checklist %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Presa_checklist %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
Presa_checklist %in% c("Oligochaeta") ~ "Clitellata", TRUE ~ Presa_checklist)) %>%
mutate(Depredador_nodo= case_when(Depredador_nodo %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Depredador_nodo %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
Depredador_nodo %in% c("Oligochaeta") ~ "Clitellata", TRUE ~ Depredador_nodo))  %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE)
interacciones <- interacciones_db %>%
mutate(Presa_checklist = case_when(Presa_checklist %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Presa_checklist %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
Presa_checklist %in% c("Oligochaeta") ~ "Clitellata", TRUE ~ Presa_checklist)) %>%
mutate(Depredador_nodo= case_when(Depredador_nodo %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Depredador_nodo %in% c("Insecta_aquatic juvenile", "Insecta_aquatic adult") ~ "Insecta_aquatic",
Depredador_nodo %in% c("Oligochaeta") ~ "Clitellata", TRUE ~ Depredador_nodo))  %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE)
g <- graph_from_edgelist(as.matrix(interacciones[,2:1]), directed = TRUE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = TRUE,
tk=TRUE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = TRUE,
tk=TRUE)
interacciones_db <- read.csv(paste(directorio, "data/interacciones.csv", sep = "/"))
interacciones <- interacciones_db %>%
mutate(Presa_checklist = case_when(Presa_checklist %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Presa_checklist %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
Presa_checklist %in% c("Oligochaeta") ~ "Clitellata", TRUE ~ Presa_checklist)) %>%
mutate(Depredador_nodo= case_when(Depredador_nodo %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Depredador_nodo %in% c("Insecta_aquatic juvenile", "Insecta_aquatic adult") ~ "Insecta_aquatic",
Depredador_nodo %in% c("Oligochaeta") ~ "Clitellata", TRUE ~ Depredador_nodo))  %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE)
g <- graph_from_edgelist(as.matrix(interacciones[,2:1]), directed = TRUE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = TRUE,
tk=TRUE)
library(tidyverse)
library(ggplot2)
library(igraph)
# remotes::install_github("lsaravia/multiweb")
library(multiweb)
library(NetIndices)
directorio <- "C:/Users/ASUS/Documents/GitHub/trophicVIRCH/"
interacciones_db <- read.csv(paste(directorio, "data/interacciones.csv", sep = "/"))
interacciones <- interacciones_db %>%
mutate(Presa_checklist = case_when(Presa_checklist %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Presa_checklist %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
Presa_checklist %in% c("Oligochaeta") ~ "Clitellata", TRUE ~ Presa_checklist)) %>%
mutate(Depredador_nodo= case_when(Depredador_nodo %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Depredador_nodo %in% c("Insecta_aquatic juvenile", "Insecta_aquatic adult") ~ "Insecta_aquatic",
Depredador_nodo %in% c("Oligochaeta") ~ "Clitellata", TRUE ~ Depredador_nodo))  %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE)
g <- graph_from_edgelist(as.matrix(interacciones[,2:1]), directed = TRUE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = TRUE,
tk=TRUE)
interacciones_db <- read.csv(paste(directorio, "data/interacciones.csv", sep = "/"))
interacciones <- interacciones_db %>%
mutate(Presa_checklist = case_when(Presa_checklist %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Presa_checklist %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
Presa_checklist %in% c("Oligochaeta") ~ "Clitellata", TRUE ~ Presa_checklist)) %>%
mutate(Depredador_nodo= case_when(Depredador_nodo %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Depredador_nodo %in% c("Insecta_aquatic juvenile", "Insecta_aquatic adult") ~ "Insecta_aquatic",
Depredador_nodo %in% c("Oligochaeta") ~ "Clitellata", TRUE ~ Depredador_nodo))  %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE)
g <- graph_from_edgelist(as.matrix(interacciones[,2:1]), directed = TRUE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = TRUE,
tk=TRUE)
interacciones_db <- read.csv(paste(directorio, "data/interacciones.csv", sep = "/"))
interacciones <- interacciones_db %>%
mutate(Presa_checklist = case_when(Presa_checklist %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Presa_checklist %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
Presa_checklist %in% c("Oligochaeta") ~ "Clitellata", TRUE ~ Presa_checklist)) %>%
mutate(Depredador_nodo= case_when(Depredador_nodo %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Depredador_nodo %in% c("Insecta_aquatic juvenile", "Insecta_aquatic adult") ~ "Insecta_aquatic",
Depredador_nodo %in% c("Oligochaeta") ~ "Clitellata", TRUE ~ Depredador_nodo))  %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE)
g <- graph_from_edgelist(as.matrix(interacciones[,2:1]), directed = TRUE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = TRUE,
tk=TRUE)
g <- graph_from_edgelist(as.matrix(interacciones[,2:1]), directed = TRUE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = TRUE,
tk=TRUE)
interacciones_db <- read.csv(paste(directorio, "data/interacciones.csv", sep = "/"))
interacciones <- interacciones_db %>%
mutate(Presa_checklist = case_when(Presa_checklist %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Presa_checklist %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
Presa_checklist %in% c("Oligochaeta") ~ "Clitellata", TRUE ~ Presa_checklist)) %>%
mutate(Depredador_nodo= case_when(Depredador_nodo %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Depredador_nodo %in% c("Insecta_aquatic juvenile", "Insecta_aquatic adult") ~ "Insecta_aquatic",
Depredador_nodo %in% c("Oligochaeta") ~ "Clitellata", TRUE ~ Depredador_nodo))  %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE)
g <- graph_from_edgelist(as.matrix(interacciones[,2:1]), directed = TRUE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = TRUE,
tk=TRUE)
interacciones_db <- read.csv(paste(directorio, "data/interacciones.csv", sep = "/"))
interacciones <- interacciones_db %>%
mutate(Presa_checklist = case_when(Presa_checklist %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Presa_checklist %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
Presa_checklist %in% c("Oligochaeta") ~ "Clitellata", TRUE ~ Presa_checklist)) %>%
mutate(Depredador_nodo= case_when(Depredador_nodo %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Depredador_nodo %in% c("Insecta_aquatic juvenile", "Insecta_aquatic adult") ~ "Insecta_aquatic",
Depredador_nodo %in% c("Oligochaeta") ~ "Clitellata", TRUE ~ Depredador_nodo))  %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE)
g <- graph_from_edgelist(as.matrix(interacciones[,2:1]), directed = TRUE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = TRUE,
tk=TRUE)
library(tidyverse)
library(ggplot2)
library(igraph)
# remotes::install_github("lsaravia/multiweb")
library(multiweb)
library(NetIndices)
interacciones <- interacciones_db %>%
mutate(Presa_checklist = case_when(Presa_checklist %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Presa_checklist %in% c("Insecta_aquatic juvenile", "Insecta_aquatic") ~ "Insecta_aquatic",
Presa_checklist %in% c("Oligochaeta") ~ "Clitellata", TRUE ~ Presa_checklist)) %>%
mutate(Depredador_nodo= case_when(Depredador_nodo %in% c("Insecta_terrestrial juvenile", "Insecta_terrestrial adult") ~ "Insecta_terrestrial",
Depredador_nodo %in% c("Insecta_aquatic juvenile", "Insecta_aquatic adult") ~ "Insecta_aquatic",
Depredador_nodo %in% c("Oligochaeta") ~ "Clitellata", TRUE ~ Depredador_nodo))  %>%
group_by(Depredador_nodo, Presa_checklist) %>%
summarise() %>%
filter(Presa_checklist!="") %>%
rename(predator=Depredador_nodo,
prey=Presa_checklist) %>%
distinct(prey, predator, .keep_all = TRUE)
g <- graph_from_edgelist(as.matrix(interacciones[,2:1]), directed = TRUE)
plotTrophLevel(g, ylab = "Trophic level",
vertexLabel = TRUE,
tk=TRUE)
